# 新的起点

- _更新时间 2025-4-16_

这次算是实现了一直以来的想法。一直打算做个小网站啥的，放点文章和跟自己相关的东西。这次突发脑梗()，想要把教程做成网站，然后就有了这个。感觉还不错。

## 目前的简略计划

### 基本功能

- [x] 完成网站的基本框架
- [ ] 网站记忆功能
  - [x] 记忆语言
  - [x] 回到之前的页面
  - [x] 记录阅读位置
- [ ] 阅读操作逻辑
  - 点名批评返回按钮放到文章顶部的反人类设计
- [ ] 完善多语言功能

### 网站样式

- [x] 文章基本信息显示
- [ ] Markdown 样式优化
  - [x] 任务列表基本样式
  - [x] 修正任务列表下的普通列表
  - [ ] 代码框语法高亮
  - [ ] 代码框语言显示和复制按钮
- [ ] 增加文章展开的衔接动画
  - [x] 同时改变多个文章加载导致的状态延迟
  - [ ] 文章展开的衔接动画
  - [ ] 文章加载的衔接动画
- [ ] 重新规划 css 文件
  - 样式加载延迟导致深色模式插件不能正常识别深色模式
  - 并不是，就是插件的识别逻辑并不友好，还好 HoudiniAPI 可以避免这个问题
- [ ] 增加文章 Loading 样式
- [ ] 增加文章语言提醒
- [ ] 字体图标问题
  - [ ] 移除 SegoeFluentIcons 依赖
  - [ ] 规划图标分包字体
- [ ] 图像查看器
  - 以及非跳转的查看图像

### 组件库功能

- [x] 组件焦点
- [x] 状态化虚拟列表
- [x] SVG 图标
- [x] 滚动条
- [ ] 聊天控件
  - [x] 对话列表
  - [x] 聊天框
  - [x] 聊天框展开收起动画函数化
  - [x] 实现状态化
  - [ ] 气泡功能拓展
  - [ ] 聊天框功能拓展
    - 比如触控端拖动顶部小横条可以展开和收起
- [ ] 页面容器
  - [x] 路由动画自定义函数
  - [x] 假路由系统
  - [x] 自动记忆位置
    - [x] 临时记忆
    - [ ] 永久记忆
  - [ ] 路由记录系统
    - 无 url 变化时支持本地路由记录
    - 支持读取浏览记录作为路由记录（当用户从浏览记录进入后丢失路由记录）
  - [ ] 路由树
    - 以便支持更合理更精确的路由索引
  - [ ] 缓存管理
    - 当页面数量足够大时，限制缓存数量以减少内存占用
- [ ] 卡片
  - [x] 基本
  - [ ] 尺寸动画
  - [ ] 高级阴影配置
- [ ] 高级按钮样式
  - [ ] 图标位置 (贴边/内嵌)

### 数据整理

- [x] 重新编排文章文件
- [ ] 整理 js 包

### Bug 修复

- [x] Card 即使禁用，触控点击仍然能导致样式改变
- [x] Loading 动画卡顿感
- [x] 页面切换动画拖尾感
- [x] 手机端输入框展开输入法无衔接
  - 哦这个是 Arc 的问题
- [x] 从特定 url 进入后 url 会被清空
  - 好好好，费尽脑筋，排查一圈后发现原因是 ComponentPage 中存在一个 PageContainer
  - 赶工一个 routeMode 解决问题了
- [x] 从特定 url 进入后显示未知文章
  - 因为 onRouted 中没等文章信息导入就先加载信息了，加个 await 就好了
  - config 记录和 url 历史记录的功能有点冲突了，但是在关闭 config 记录之前，先把这个问题解决了
  - [x] 从 Config 记录进入的文章页面显示未知文章
  - 或者说……增加个回到之前的页面的功能？再考虑罢。
  - 行，这个东西很简单就直接做出来了
- [x] 触控点击在特定情况下会出现 **浮动**+**阴影消失** 的情况
  - 用嵌套判断阻止鼠标事件后这个也解决了
- [x] 列表标记位置不应该居中
- [x] 研究解决列表样式问题
  - 是的，就是我的窗口样式影响了 Markdown 的渲染
  - 是我过度设计了，精简样式后能保持原有样式且正常显示，完美
  - 同时还能用上原汁原味的多级列表图标
- [x] 首次加载非文章页面不能正常显示标题
  - 能否让网页等待翻译完毕后再显示？
  - 用 createEffect 跟踪 dict 就好了
- [x] CheckBox 的图标位置未居中
  - 为 CheckBox 单独设置 Display 即可
- [x] CheckBox 未与文字对齐
  - 一个列表多个任务，会有微小位移
  - 别忘了 vertical-align 这个属性
- [x] 任务与普通列混合排列，列表头部离奇消失
  - 现在的问题是任务项目的文本前面会有空格字符导致样式问题，但是……算了，太麻烦了，以后再说
  - [x] 考虑是否进行任务列表样式微调
    - 不死磕这些了，Web 开发就这样了
- [x] Card 尺寸异常膨胀
  - 父元素没有 Overflow 限制时，需要自行设定 appearanceDiv 的尺寸来纠正
- [x] 文章加载闪动
  - 多余的内容重置操作
- [x] 无法选择文章文本
  - 不知道什么时候在 Card 的 appearanceDiv 中加了个`pointer-events: none`
- [x] 数据加载界面卡顿
  - 原因是直接在主线程操作
- [x] 按钮组件的图标运行时不能改变
- [x] Card 交互区域固定
- [ ] 样式的 Firefox 支持
- [ ] 文章记忆功能有缺陷
- [ ] 页面切换后，能选择消失页面的文本

### 研究

- [x] 如何用 Deno 搞定 url 重定向实现完美假路由
  - 似乎跟入口文件的配置有关，这个问题导致文件也无法访问到
  - 的确是入口文件的问题，配置一个自定义的入口文件即可
- [x] 手机浏览器预览图空白问题
  - 是否与 SPA 应用渲染行为有关？
  - 大多数 SPA 应用都会出现这个问题，不用解决，等浏览器自行适配
- [x] 研究如何完美保证显示错误兜底提示
  - 把 CssCheck 改到首页加载完毕的事件中就好了
- [ ] 研究如何让各种浏览器识别到网站自己的深色模式
- [ ] 整理 houdini-figma-squircle 模块
- [ ] 优化网站性能
- [ ] 如何将框架制作成 npm 包
- [ ] Github 评论功能
- [ ] RSS 功能
- [ ] 完美的字体渲染
  - [字体渲染问题例图](/articles/new/fontIssue.webp)
  - 上半部分是有问题的渲染模式，下半部分是正确的渲染模式
  - 换字体可能能够解决问题
- [ ] 研究 Bun
- [ ] 无障碍设计

## 废弃

- [x] 实现近乎完美的 Squircle
  - [x] 基本的 figma Squircle
  - [x] 兼容边框效果
  - [x] 边框粗细方向化
