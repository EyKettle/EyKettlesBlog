# 新的起点

这次算是实现了一直以来的想法。一直打算做个小网站啥的，放点文章和跟自己相关的东西。这次突发脑梗()，想要把教程做成网站，然后就有了这个。感觉还不错。

## 目前的简略计划

- [x] 完成网站的基本框架
- [ ] 网站记忆功能
  - [x] 记忆语言
  - [x] 回到之前的页面
  - [x] 记录阅读位置
- [ ] 完善网站样式
  - [ ] 重新规划 css 文件
    - 样式加载延迟导致深色模式插件不能正常识别深色模式
    - 并不是，就是插件的识别逻辑并不友好，还好 HoudiniAPI 可以避免这个问题
  - [ ] Markdown 样式优化
    - [x] 任务列表基本样式
    - [x] 修正任务列表下的普通列表
  - [ ] 增加文章 Loading 样式
  - [ ] 文章基本信息显示
  - [ ] 增加文章语言提醒
  - [ ] 增加文章展开的衔接动画
    - [x] 同时改变多个文章加载导致的状态延迟
    - [ ] 文章展开的衔接动画
    - [ ] 文章加载的衔接动画
  - [ ] 字体图标问题
  - [ ] 资源文件查看器
    - 在网站中直接查看 url 所指的图像资源等
- [ ] 补充完善组件库功能
  - [x] 将假路由系统移动到 PageContainer 内部
  - [x] 增加 localMemory 作为假路由折中方案
    - 应该支持拓展记忆函数
  - [x] 路由动画自定义函数
  - [x] 修复 Card 组件位置计算问题
    - 子元素导致的位置计算错误
  - [x] 优化 Card 位置计算
    - 可以用 requestAnimationFrame 优化性能
  - [x] i18n 导致的一系列问题
    - [x] 如何预判语言读取完毕
      - 使用 createEffect 跟踪 dict
  - [ ] 阅读操作逻辑
    - 点名批评返回按钮放到文章顶部的反人类设计
  - [ ] 函数接口增加路由动画类型
  - [ ] 增加 Card 尺寸动画
  - [ ] 完善多语言功能
  - [ ] 公共常量接口（如 rem 的具体值）
  - [ ] 高级焦点系统

### 数据整理

- [ ] 重新编排文章文件
- [ ] 整理 js 包

### Bug 修复

- [x] 文章加载闪动
  - 多余的内容重置操作

### 研究

- [x] 如何用 Deno 搞定 url 重定向实现完美假路由
  - 似乎跟入口文件的配置有关，这个问题导致文件也无法访问到
  - 的确是入口文件的问题，配置一个自定义的入口文件即可
- [ ] 整理 Figma-houdini-squircle (TS) 模块
- [ ] 如何优化网站加载速度
- [ ] 如何将框架制作成 npm 包
- [ ] 如何使用 Lighthouse 分析优化网站性能
- [ ] Github 评论功能
- [ ] RSS 功能
- [ ] 完美的字体渲染
  - [字体渲染问题例图](/articles/new/fontIssue.webp)
  - 上半部分是有问题的渲染模式，下半部分是正确的渲染模式
  - 换字体可能能够解决问题
- [x] 手机浏览器预览图空白问题
  - 是否与 SPA 应用渲染行为有关？
  - 大多数 SPA 应用都会出现这个问题，不用解决，等浏览器自行适配
- [ ] 研究 Bun

## 补充信息

- **_2025-1-25 晚上 22:19_**

出现了一个大问题，虽然地址栏可以自动适应，但是`/XX`没法接上对应页面。

之后再看看怎么办吧。

还有，网站有深色模式，为什么大多数插件都没识别出来。难道是因为我把媒体查询的部分颠倒了？我试试反过来。

还真是……彳亍，我换正常点。嘶……好像又不是，很奇怪。下次 push 再试试罢。

- **_2025-1-26 中午 12:10_**

好吧，没用。那就先加个检测罢。

另外 url 后缀的问题，应该需要修改 Deno 的配置，我去部署个 Deno 看看能不能将 SolidJS 项目嫁接过去。

- **_2025-1-26 下午 13:09_**

搞明白了，插件是检测 html 头部信息，至少对于 DarkReader 是这样的。我参考 Github 的头部信息抄了一个，在本地是没问题了。

- **_2025-1-26 下午 13:55_**

好好，原来`**粗体冒号：**`这个 bug 是 Markdown 格式工具普遍的问题。

- 并不是，那是因为`:`和`**`之间多了一个空格，导致没法识别的。

另外浮动条似乎有点太通透了，之后调调看。

- **_2025-2-8 晚上 21:56_**

我知道 url 定向不对的问题是怎么回事了，那是因为 SPA 构建完成之后丢失了原本的项目结构和未被直接引用的资源文件。

（这就是不老实学习的后果）

我应该去学习一下 publicPath 那些东西如何配置。明天研究研究。

- **_2025-2-14 下午 11:21_**

发现了一些 BUG 和问题:

- [x] 卡片即使禁用，触控点击仍然能导致样式改变
- [x] Loading 动画卡顿感
- [x] 页面切换动画拖尾感
- [x] 手机端输入框展开输入法无衔接
  - 哦这个是 Arc 的问题

然后还有一个想法：

- [x] 卡片效果应该增加一项仅 3D 效果，方便模仿 Win10 的磁贴
  - [x] 兼容手机端
    - 坏了，这个 BUG 无法理解
    - 套了层检测，阻止鼠标事件后差不多那回事了

* **_2025-2-14 晚上 20:08_**

深色模式的适配仍然有问题，现在需要做两件事：

- [ ] 研究如何让各种浏览器识别到网站自己的深色模式
- [x] 研究如何完美保证显示错误兜底提示
  - 把 CssCheck 改到首页加载完毕的事件中就好了

* **_2025-2-14 晚上 22:37_**

卡片 3D 效果的按压手感不均匀，可能跟 scale 计算有关，需要研究研究如何解决。

还有卡片按压区域应该是恒定的，如果因为旋转而改变，在特定位置会发生抽搐。

- [x] 抹平卡片 3D 效果按压手感
  - 明白这是怎么回事了，是因为透视效果是从父元素计算的，子元素跟父元素中心有偏移就看起来斜着。透视效果改到子元素 Transform 中就好了
- [ ] 优化卡片 3D 效果的触发区域
  - 不干了，有点麻烦，之后想做的时候再说吧

* **_2025-2-15 晚上 20:55_**

还有两个关于假路由的问题：

- [x] 从特定 url 进入后 url 会被清空
  - 好好好，费尽脑筋，排查一圈后发现原因是 ComponentPage 中存在一个 PageContainer
  - 赶工一个 routeMode 解决问题了
- [x] 从特定 url 进入后显示未知文章
  - 因为 onRouted 中没等文章信息导入就先加载信息了，加个 await 就好了
  - config 记录和 url 历史记录的功能有点冲突了，但是在关闭 config 记录之前，先把这个问题解决了
  - [x] 从 Config 记录进入的文章页面显示未知文章
  - 或者说……增加个回到之前的页面的功能？再考虑罢。
  - 行，这个东西很简单就直接做出来了

还有卡片问题……

- [x] 触控点击在特定情况下会出现 **浮动**+**阴影消失** 的情况
  - 用嵌套判断阻止鼠标事件后这个也解决了

* **_2025-2-16 晚上 21:55_**

汇报一个问题：

- [x] 列表标记位置不应该居中

* **_2025-2-17 晚上 21:55_**

关于列表样式的问题，我想，之所以无额外 CSS 配置的列表会和下一行混在一起，可能跟父级传递的 CSS 属性有关。也许可以去查查资料，看看是否真的是有些属性导致的。

- [x] 研究解决列表样式问题
  - 是的，就是我的窗口样式影响了 Markdown 的渲染
  - 是我过度设计了，精简样式后能保持原有样式且正常显示，完美
  - 同时还能用上原汁原味的多级列表图标

* **_2025-2-20 早上 10:54_**

汇报一些问题：

- [x] 首次加载非文章页面不能正常显示标题
  - 能否让网页等待翻译完毕后再显示？
  - 用 createEffect 跟踪 dict 就好了
- [x] CheckBox 的图标位置未居中
  - 为 CheckBox 单独设置 Display 即可
- [x] CheckBox 未与文字对齐
  - 一个列表多个任务，会有微小位移
  - 别忘了 vertical-align 这个属性
- [x] 任务与普通列混合排列，列表头部离奇消失
  - 现在的问题是任务项目的文本前面会有空格字符导致样式问题，但是……算了，太麻烦了，以后再说
  - [ ] 考虑是否进行任务列表样式微调

又给列表头部标识换成自定义的了，因为原版的有样式 BUG，强迫症不能忍。

- **_2025-3-4 晚上 20:41_**

忘了记录一下了：

- [x] 实现近乎完美的 Squircle
  - [x] 基本的 figma Squircle
  - [x] 兼容边框效果
  - [x] 交互区域修复
    - 主要是 Card 组件，硬套 Div 得了
  - [x] 边框粗细方向化
- [ ] 实现更好的 Card 阴影
  - 3D 投影变化

发现那个 BUG 是什么了：

- [x] 修复长文章进入后跳动的问题
  - 已记录到大纲

* **_2025-3-5 中午 12:56_**

记录一个任务：

- [x] 将文章文件移动到 Public 目录下
  - 已记录到大纲

* **_2025-3-8 晚上 23:27_**

连夜修复 BUG，把 figma-squircle 和我改过的 css-houdini-squircle 融合到一起放到 public 下解决了 houdiniAPI 使用的问题。

- **_2025-3-9 下午 14:32_**

- [x] Squircle 形状有最小限制？主页卡片缩小产生位移
  - 卡片父组件没有 Overflow 限制，需要自行设定 appearanceDiv 的尺寸来纠正
